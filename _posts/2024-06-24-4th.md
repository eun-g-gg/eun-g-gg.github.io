---
title: "ì½”í‹€ë¦° ì¸ ì•± 4ì¥-1"
author:
  name: ì€ì§€
  link: https://github.com/eun-g-gg
date: 2024-06-24 11:24:00 +0900
categories: [ê³µë¶€, Kotlin]
tags: [ì½”í‹€ë¦°ì¸ì•±, Kotlin]
math: true
---

# 4. class, ê°ì²´, ì¸í„°í˜ì´ìŠ¤

> ìë°”ì™€ ë‹¬ë¦¬ kotlin ì„ ì–¸ì€ ê¸°ë³¸ì ìœ¼ë¡œ final ì´ë©° publicì´ë‹¤. ì¤‘ì²© classëŠ” ê¸°ë³¸ì ìœ¼ë¡œëŠ” ë‚´ë¶€ class ê°€ ì•„ë‹ˆë‹¤. â‡’ kotlin ì¤‘ì²© class ì—ëŠ” ì™¸ë¶€ class ì°¸ì¡°ê°€ ì—†ë‹¤

## 4.1 class ê³„ì¸µ ì •ì˜

> kotlin ì—ì„œ class ê³„ì¸µ ì •ì˜ ğŸ†š Javaì—ì„œ class ê³„ì¸µ ì •ì˜, kotlin ê°€ì‹œì„±ê³¼ ì ‘ê·¼ ë³€ê²½ì

- kotlin ê°€ì‹œì„±/ì ‘ê·¼ ë³€ê²½ì â‡’ javaì™€ ë¹„ìŠ· but ì•„ë¬´ê²ƒë„ ì§€ì •í•˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ ê°€ì‹œì„±ì€ dif
- **kotlinì˜ sealed ë³€ê²½ì (class ìƒì† ì œí•œ) ì•Œì•„ë³´ê¸°!**

### 4.1.1 kotlin interface

- kotlinì˜ ì¸í„°í˜ì´ìŠ¤ ë‚´ë¶€ â‡’ ì¶”ìƒ method, êµ¬í˜„ì´ ìˆëŠ” method ì •ì˜ ê°€ëŠ¥
  - ì¸í„°í˜ì´ìŠ¤ ë‚´ë¶€ì—ëŠ” ìƒíƒœ ë“¤ì–´ê°ˆ ìˆ˜ ì—†ìŒ
- kotlin í´ë˜ìŠ¤ëŠ” classë¡œ ì •ì˜, ì¸í„°í˜ì´ìŠ¤ëŠ” interface
- methodê°€ ì •ì˜ëœ interface ì‚¬ìš©í•˜ê¸° â¬‡ï¸

```kotlin
interface Clickable {
	fun click() // ì¶”ìƒ method
}

// ì´ interface êµ¬í˜„í•˜ëŠ” ëª¨ë“  ë¹„ì¶”ìƒ classëŠ” clickì— ëŒ€í•œ êµ¬í˜„ ì œê³µ í•„
```

```kotlin
class Button : Clickable {
	override fun click() = println("I was clicked")
}

Button().click() // I was clicked
```

- Javaì—ì„œëŠ” extends, implements ì‚¬ìš©, kotlinì—ì„œëŠ” class ì´ë¦„ ë’¤ì— **:** ë¶™ì´ê³  ì¸í„°í˜ì´ìŠ¤, í´ë˜ìŠ¤ ì´ë¦„ ì ì–´ì„œ class í™•ì¥ + ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ ì²˜ë¦¬
- **ì¸í„°í˜ì´ìŠ¤ ì›í•˜ëŠ” ë§Œí¼ ê°œìˆ˜ ì œí•œ ì—†ì´ êµ¬í˜„ ê°€ëŠ¥**
  - **class í™•ì¥ì€ only 1**
- **override** ë³€ê²½ì â‡’ ìƒìœ„ class ë‚˜ ìƒìœ„ ì¸í„°í˜ì´ìŠ¤ì— ìˆëŠ” propertyë‚˜ method ì˜¤ë²„ë¼ì´ë“œ
  - Javaì™€ ë‹¤ë¥´ê²Œ ê¼­ override ë³€ê²½ì ì‚¬ìš©í•´ì•¼í•¨
  - ì‹¤ìˆ˜ë¡œ ìƒìœ„ class method ì˜¤ë²„ë¼ì´ë“œ ë°©ì§€
    - ìƒìœ„ classì— ìˆëŠ” methodì™€ ì‹œê·¸ë‹ˆì²˜ ê°™ì€ method ìš°ì—°íˆ í•˜ìœ„ì—ì„œ ì„ ì–¸ â‡’ ì»´íŒŒì¼ì´ ì•ˆë¨! override ë¶™ì´ê±°ë‚˜ method ì´ë¦„ ë°”ê¾¸ê¸°
- ì¸í„°í˜ì´ìŠ¤ methodë„ default êµ¬í˜„ ì œê³µ ê°€ëŠ¥
  - method ë³¸ë¬¸ â‡’ method ì‹œê·¸ë‹ˆì²˜ ë’¤ì— ì¶”ê°€
  ```kotlin
  interface Clickable {
  	fun click() // ì¼ë°˜ method ì„ ì–¸, êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ëŠ” click method êµ¬í˜„í•„ìš”í•¨

  	fun showOff() = println("I'm clickable!") // ë””í´íŠ¸ êµ¬í˜„ ìˆìŒ, êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ëŠ” ìƒˆë¡œìš´ ë™ì‘ ì •ì˜ or ë””í´íŠ¸ ë™ì‘ ì‚¬ìš©
  }
  ```
  ```kotlin
  interface Focusable {
  	fun setFocus(b: Boolean) =
  		println("I ${if (b) "got" else "lost"} focus.")

  		fun showOff() = println("I'm focusable!")
  	}
  ```
- í•œ class ì—ì„œ ë‘ ì¸í„°í˜ì´ìŠ¤ í•¨ê»˜ êµ¬í˜„ (showOff default êµ¬í˜„ ë‹¤ ë“¤ì–´ìˆìŒ) â‡’ showOff ì–´ëŠ ìª½ë„ ì„ íƒë˜ì§€ ì•ŠìŒ
  - classê°€ êµ¬í˜„í•˜ëŠ” ë‘ ìƒìœ„ ì¸í„°í˜ì´ìŠ¤ì˜ showOff êµ¬í˜„ ëŒ€ì²´í•  overriding method ì œê³µ X â‡’ ì»´íŒŒì¼ëŸ¬ ì˜¤ë¥˜ ë°œìƒ, kotlin ì»´íŒŒì¼ëŸ¬ê°€ í•˜ìœ„ classì— ì§ì ‘ êµ¬í˜„í•˜ê²Œ ê°•ì œí•¨
  - ìƒìœ„ íƒ€ì… ì´ë¦„ `<>` ì— ë„£ì–´ì„œ `super` ì§€ì • â‡’ ì–´ë–¤ ìƒìœ„ íƒ€ì… member method í˜¸ì¶œí•  ì§€ ì§€ì • ê°€ëŠ¥
  ```kotlin
  class Button : Clickable, Focusable {
  	override fun click() = println("I was clicked")
  	override fun showOff() {
  		super<Clickable>.showOff()
  		super<Focusbale>.showOff()
  	}




  fun main(args: Array<String>) {
  	val button = Button()
  	button.showOff() // I'm clickble! \n I'm focusable!
  	button.setFocus (true) // I got focus. ìë™ìœ¼ë¡œ ìƒì†ë¨
  	button.click() // I was clicked
  }
  ```

### 4.1.2 open, final, abstract ë³€ê²½ì: ê¸°ë³¸ì ìœ¼ë¡œ final

- javaëŠ” finalë¡œ ìƒì† ê¸ˆì§€í•˜ì§€ ì•ŠëŠ” ëª¨ë“  classë¥¼ ë‹¤ë¥¸ classê°€ ìƒì† ê°€ëŠ¥ but ë¬¸ì œ ë°œìƒ ê°€ëŠ¥
  - **ì·¨ì•½í•œ ê¸°ë°˜ class (fragile base class)** ë¬¸ì œ ë°œìƒ â‡’ í•˜ìœ„ classê°€ ê°€ì¡Œë˜ ê¸°ë°˜ classì— ëŒ€í•œ ê°€ì •ì´ ê¸°ë°˜ ë³€ê²½í•˜ë©´ì„œ ê¹¨ì§
  - ìƒì†í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì •í™•í•œ ê·œì¹™ ì œê³µ X = ê¸°ë°˜ class ì˜ë„ì™€ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ method override í•  ìœ„í—˜ ìƒê¹€
  - ê¸°ë°˜ class ë³€ê²½ ì‹œ í•˜ìœ„ class ë™ì‘ ì˜ˆê¸°ì¹˜ ì•Šê²Œ ë°”ë€” ìˆ˜ë„ ìˆìŒ
- í•˜ìœ„ classì—ì„œ overrideí•˜ê²Œ ì˜ë„ ëœ class, methodê°€ ì•„ë‹ˆë¼ë©´ ëª¨ë‘ finalë¡œ class ë§Œë“¤ê¸°
- kotlin ì˜ classì™€ methodëŠ” ê¸°ë³¸ì ìœ¼ë¡œ final
  - ìƒì† í—ˆìš©í•˜ë ¤ë©´ class ì•ì— open ë¶™ì—¬ì•¼ í•¨ (property ë‚˜ method ì•ì—ë„ open ë¶™ì´ê¸°)
  ```kotlin
  open class RichButton : Clickable { // open class! ë‹¤ë¥¸ classê°€ ìƒì† ê°€ëŠ¥
  	fun disable() {} // final í•¨ìˆ˜. í•˜ìœ„ classê°€ override ë¶ˆê°€ëŠ¥

  	open fun animate() {} // ì—´ë ¤ìˆëŠ” í•¨ìˆ˜. í•˜ìœ„ classì—ì„œ override ê°€ëŠ¥

  	override fun click() {} // ìƒìœ„ classì—ì„œ ì„ ì–¸ëœ open methodì„. overrideí•œ methodëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì—´ë ¤ìˆìŒ
  }
  ```
  - override í•˜ëŠ” method êµ¬í˜„ì„ í•˜ìœ„ classì—ì„œ override ëª»í•˜ê²Œ ê¸ˆì§€ â‡’ override í•˜ëŠ” method ì•ì— `final` ë¶™ì´ê¸°
  ```kotlin
  open class RichButton : Clickable {
  	final override fun click() {} // í•˜ìœ„ classì—ì„œ override í•´ì„œ êµ¬í˜„í•œ methodë¥¼ ë‹¤ì‹œ override í•˜ì§€ ëª»í•œë‹¤.
  }
  ```
- kotlin ì—ì„œë„ `abstract` ë¡œ class ì„ ì–¸ ê°€ëŠ¥
  - abstractë¡œ ì„ ì–¸í•œ classëŠ” **instanceí™” ë¶ˆê°€ëŠ¥**
  - ì¶”ìƒ class ì— êµ¬í˜„ ì—†ëŠ” ì¶”ìƒ ë©¤ë²„ ìˆìŒ â‡’ í•˜ìœ„ class ì—ì„œ ì¶”ìƒ ë©¤ë²„ êµ¬í˜„ í•„ìš”(override)
    - ì¶”ìƒ ë©¤ë²„ always ì—´ë ¤ìˆìŒ â‡’ open ëª…ì‹œ í•„ìš”ì—†ìŒ
  ```kotlin
  abstract class Animated { // instanceí™” ë¶ˆê°€ëŠ¥

  	abstract fun animate() // êµ¬í˜„ ì—†ìŒ. í•˜ìœ„ classì—ì„œ ë°˜ë“œì‹œ override í•´ì•¼í•œë‹¤

  	open fun stopAnimating() {} // ë¹„ì¶”ìƒ í•¨ìˆ˜ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ final, ì›í•˜ë©´ openìœ¼ë¡œ override í—ˆìš© ê°€ëŠ¥

  	fun animateTwice() {}

  }
  ```
- ìƒì† ì œì–´ ë³€ê²½ì : access modifier (**final, open, abstract, override**)
  - ì¸í„°í˜ì´ìŠ¤ ë©¤ë²„: final, open, abstract ì‚¬ìš©í•˜ì§€ ì•ŠìŒ â‡’ í•­ìƒ open ì´ë¯€ë¡œ finalë¡œ ë³€ê²½ âŒ
  - ì¸í„°í˜ì´ìŠ¤ ë©¤ë²„ì— ë³¸ë¬¸ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ì¶”ìƒ ë©¤ë²„ (ë©¤ë²„ ì„ ì–¸ ì•ì— abstract ë¶™ì¼ í•„ìš” âŒ)
  | modifier                                         | modifier ë¶™ì€ member                        | ì„¤ëª…                                     |
  | ------------------------------------------------ | ------------------------------------------- | ---------------------------------------- |
  | final                                            | override ë¶ˆê°€ëŠ¥                             | class ë©¤ë²„ì˜ ê¸°ë³¸ modifier               |
  | open                                             | override ê°€ëŠ¥                               | ë°˜ë“œì‹œ open ëª…ì‹œí•´ì•¼ override ê°€ëŠ¥       |
  | abstract                                         | ë°˜ë“œì‹œ override                             | ì¶”ìƒ class ë©¤ë²„ì—ë§Œ abstract ë¶™ì´ê¸° ê°€ëŠ¥ |
  | ì¶”ìƒ ë©¤ë²„ì— êµ¬í˜„ ìˆìœ¼ë©´ âŒ                       |
  | override                                         | ìƒìœ„ classë‚˜ ìƒìœ„ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ override ì¤‘ | override í•˜ëŠ” ë©¤ë²„ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ open.    |
  | í•˜ìœ„ classì˜ override ê¸ˆì§€í•˜ë ¤ë©´ final ëª…ì‹œ í•„ìš” |

### 4.1.3 ê°€ì‹œì„± ë³€ê²½ì (visibility modifier) public, protected, private, internal: ê¸°ë³¸ì ìœ¼ë¡œ ê³µê°œ

| modifier               | class ë©¤ë²„                     | ìµœìƒìœ„ ì„ ì–¸                   |
| ---------------------- | ------------------------------ | ----------------------------- |
| public(ê¸°ë³¸ visiblity) | ëª¨ë“  ê³³ì—ì„œ ë³¼ ìˆ˜ ìˆìŒ         | ëª¨ë“  ê³³ì—ì„œ ë³¼ ìˆ˜ ìˆìŒ        |
| internal               | ê°™ì€ ëª¨ë“ˆ ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆìŒ  | ê°™ì€ ëª¨ë“ˆ ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆìŒ |
| protected              | í•˜ìœ„ class ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆìŒ | (ìµœìƒìœ„ ì„ ì–¸ì— ì ìš© ì•ˆë¨)     |
| private                | ê°™ì€ class ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆìŒ | ê°™ì€ íŒŒì¼ ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆìŒ |

- ì„ ì–¸ì— ëŒ€í•œ class ì™¸ë¶€ ì ‘ê·¼ ì œì–´
- classì— ì˜ì¡´í•˜ëŠ” ì™¸ë¶€ ì½”ë“œ ê¹¨ì§€ ì•Šê³ ë„ class ë‚´ë¶€ êµ¬í˜„ ë³€ê²½ ê°€ëŠ¥
- kotlin ê¸°ë³¸ visibility modifierëŠ” ëª¨ë‘ ê³µê°œë¨(**`public`**)
  - java ê¸°ë³¸ì¸ package-private ëŠ” kotlinì— ì—†ìŒ â‡’ kotlinì€ package ê·¸ëƒ¥ namespace ê´€ë¦¬ ìš©ë„ë¡œ ì‚¬ìš©, packageë¥¼ ê°€ì‹œì„± ì œì–´ì— ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
  - `internal`ë¡œ package-private ëŒ€ì²´ â‡’ **ëª¨ë“ˆ(í•œêº¼ë²ˆì— ì»´íŒŒì¼ë˜ëŠ” kotlin íŒŒì¼ë“¤)** ë‚´ë¶€ì—ì„œë§Œ ë³¼ ìˆ˜ ìˆìŒ(í”„ë¡œì íŠ¸ê°€ ë  ìˆ˜ë„ ìˆìŒ)
- internal â‡’ ì§„ì •í•œ ìº¡ìŠí™” ì œê³µ
- kotlinì€ ìµœìƒìœ„ ì„ ì–¸ì—ì„œ private í—ˆìš©
  - class, í•¨ìˆ˜, propertyê°€ ìµœìƒìœ„ ì„ ì–¸ì— í¬í•¨ë¨
  - private ëŠ” íŒŒì¼ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥

```kotlin
internal open class TalkativeButton : Focusable {
	private fun yell() = println("Hey!")
	protected fun whisper() = println("Let's talk!")
}

fun TalkativeButton.giveSpeech() { // public ì¸ë° internalì„ ë…¸ì¶œ => ë¶ˆê°€ëŠ¥
	yell() // TalkativeButtonì˜ private class ë©¤ë²„ì„. ê°™ì€ class ë‚´ì—ì„œë§Œ ë³¼ ìˆ˜ ìˆë‹¤. ì˜¤ë¥˜
	whisper() // protected ë©¤ë²„. ì˜¤ë¥˜
}

/* giveSpeechì˜ visibilityë¥¼ internalë¡œ ë³€ê²½í•˜ê±°ë‚˜ TalkativeButtonì„ publicìœ¼ë¡œ ë°”ê¿”ì•¼í•¨ */
```

- public ë‚´ì—ì„œ visibility ë” ë‚®ì€ (ex. internal) íƒ€ì…ì„ ì°¸ì¡°í•˜ì§€ ëª»í•¨
  - classì˜ ê¸°ë°˜ íƒ€ì… ëª©ë¡ì— ë“¤ì–´ì‡ëŠ” íƒ€ì… or generic classì˜ íƒ€ì… íŒŒë¼ë¯¸í„°ì— ë“¤ì–´ìˆëŠ” íƒ€ì…ì˜ visibility â‡’ ê·¸ class ìì‹ ì˜ visibilityì™€ ê°™ê±°ë‚˜ ë†’ì•„ì•¼ í•¨
  - methodì˜ ì‹œê·¸ë‹ˆì²˜ì— ì‚¬ìš©ëœ ëª¨ë“  íƒ€ì…ì˜ visibilityëŠ” methodì˜ visibilityì™€ ê°™ê±°ë‚˜ ë†’ì•„ì•¼ í•¨
    - ì–´ë–¤ í•¨ìˆ˜ í˜¸ì¶œ í•˜ê±°ë‚˜ class í™•ì¥í•  ë•Œ í•„ìš”í•œ ëª¨ë“  typeì— ì ‘ê·¼ì´ ê°€ëŠ¥í•¨
- protected ë©¤ë²„ëŠ” ì˜¤ì§ ì–´ë–¤ class ë‚˜ ê·¸ class ìƒì†í•œ class ì•ˆì—ì„œë§Œ ë³´ì„
  - **class í™•ì¥í•œ í•¨ìˆ˜ëŠ” ê·¸ classì˜ privateë‚˜ protected ë©¤ë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŒ**

### 4.1.4 ë‚´ë¶€ classì™€ ì¤‘ì²©ëœ class: ê¸°ë³¸ì ìœ¼ë¡œ ì¤‘ì²© class

- kotlinì€ ì™¸ë¶€ classê°€ ë‚´ë¶€ class ë‚˜ ì¤‘ì²©ëœ classì´ private ë©¤ë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŒ
- class ì•ˆì— ë‹¤ë¥¸ class ì„ ì–¸ ê°€ëŠ¥ â‡’ ë„ìš°ë¯¸ class ìº¡ìŠí™” or ì½”ë“œ ì •ì˜ë¥¼ ê·¸ ì½”ë“œ ì‚¬ìš©í•˜ëŠ” ê³³ ê°€ê¹Œì´ì— ë‘ê³  ì‹¶ì„ ë•Œ ìœ ìš©
  - kotlinì˜ **nested class(ì¤‘ì²© class)**ëŠ” ëª…ì‹œì ìœ¼ë¡œ ìš”ì²­í•˜ì§€ ì•Šìœ¼ë©´ **ë°”ê¹¥ìª½ class instanceì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ**
  ```kotlin
  // View ì§ë ¬í™”ì— í•„ìš”í•œ ëª¨ë“  ë°ì´í„°ë¥¼ ë„ìš°ë¯¸ í´ë˜ìŠ¤ë¡œ ë³µì‚¬ ê°€ëŠ¥
  // State ì¸í„°í˜ì´ìŠ¤ ì„ ì–¸, Serializable êµ¬í˜„

  interface State: Serializable

  interface View {
  // ë·° ìƒíƒœ ê°€ì ¸ì™€ì„œ ì €ì¥í• ë•Œ í•„ìš”í•œ method ì„ ì–¸
  	fun getCurrentState(): State
  	fun restoreState(state: State) {}
  }
  ```
  ```java
  /* ìë°” */
  public class Button implements View {
  	@Override
  	public State getCurrentState() {
  		return new ButtonState(); // ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
  	}

  	@Override
  	public void retoreState(State state) {/*...*/}

  	public class ButtonState implements State {/*...*/}
  }

  // ButtonState íƒ€ì…ì˜ state : ì§ë ¬í™”í•˜ë ¤ëŠ” ë³€ìˆ˜, but Button ì§ë ¬í™” ì˜¤ë¥˜ ë°œìƒí•¨
  ```
- JavaëŠ” ë‹¤ë¥¸ class ì•ˆì—ì„œ ì •ì˜í•œ classëŠ” ìë™ìœ¼ë¡œ ë‚´ë¶€ classê°€ ë¨ â‡’ ButtonState classëŠ” Buttonì— ëŒ€í•œ ì°¸ì¡°ë¥¼ í¬í•¨ â‡’ ButtonState ì§ë ¬í™” í•  ìˆ˜ ì—†ìŒ
  - Buttonì— ëŒ€í•œ ì°¸ì¡°ê°€ ButtonStateì˜ ì§ë ¬í™” ë°©í•´
  - ButtonStateë¥¼ staticìœ¼ë¡œ ì„ ì–¸í•˜ê¸°
  - Javaì—ì„œ classë¥¼ staticìœ¼ë¡œ ì„ ì–¸í•˜ë©´ ë‘˜ëŸ¬ì‹¼ ë°”ê¹¥ìª½ classì— ëŒ€í•œ ë¬µì‹œì  ì°¸ì¡°ê°€ ì‚¬ë¼ì§
- kotlin nested classì— modifier ì—†ìœ¼ë©´ staticê³¼ ê°™ìŒ
  ```java
  class Button: View {
  	override fun getCurrentState(): State = ButtonState()

  	override fun restoreState(state: State) {/*...*/}

  	class ButtonState: State {/*...*/}
  }
  ```
  - ë‚´ë¶€ classë¡œ ë³€ê²½í•´ì„œ ë°”ê¹¥ classì— ëŒ€í•œ ì°¸ì¡°ë¥¼ í¬í•¨í•˜ê²Œ ë§Œë“¤ë ¤ë©´ `inner` modifier ë¶™ì´ê¸°
  | class B ì•ˆì— ì •ì˜ëœ class A                    | in Java        | in Kotlin     |
  | ---------------------------------------------- | -------------- | ------------- |
  | ì¤‘ì²© class(ë°”ê¹¥ìª½ classì— ëŒ€í•œ ì°¸ì¡° ì €ì¥ ì•ˆí•¨) | static class A | class A       |
  | ë‚´ë¶€ class(ë°”ê¹¥ìª½ classì— ëŒ€í•œ ì°¸ì¡° ì €ì¥)      | class A        | inner class A |
  - ë‚´ë¶€ class Inner ì•ˆì—ì„œ ë°”ê¹¥ìª½ class Outerì˜ ì°¸ì¡°ì— ì ‘ê·¼ â‡’ `this@Outer` ë¼ê³  ì“°ê¸°
  ```java
  class Outer {
  	inner class Inner {
  		fun getOuterReference(): Outer = this@Outer
  	}
  }
  ```

### 4.1.5 ë´‰ì¸ëœ class: class ê³„ì¸µ ì •ì˜ ì‹œ ê³„ì¸µ í™•ì¥ ì œí•œ

- `sealed` ë¶™ì´ë©´ ìƒìœ„ classë¥¼ ìƒì†í•œ í•˜ìœ„ class ì •ì˜ ì œí•œ ê°€ëŠ¥
  - ë°˜ë“œì‹œ ìƒìœ„ class ì•ˆì— ì¤‘ì²©ì‹œì¼œì„œ í•˜ìœ„ class ì •ì˜í•˜ê¸°
  - **ë´‰ì¸ëœ classëŠ” ìë™ìœ¼ë¡œ openì„**

```kotlin
sealed class Expr { // ê¸°ë°˜ class ë´‰ì¸ì‹œí‚¤ê¸°

	class Num(val value:Int) : Expr() // ê¸°ë°˜ classì˜ ëª¨ë“  í•˜ìœ„ class ì¤‘ì²© classë¡œ ë‚˜ì—´

	class Sum(val left: Expr, val right: Expr) : Expr()
}

fun eval(e: Expr): Int =
	when(e) { // when ì‹ì´ ëª¨ë“  í•˜ìœ„ class ê²€ì‚¬í•¨ => ë³„ë„ì˜ else ë¶„ê¸° ì—†ì–´ë„ ë¨
		is Expr.Num -> e.value
		is Expr.Sum -> eval(e.right) + eval(e.left)
	}
```

---

## 4.2 ë»”í•˜ì§€ ì•Šì€ ìƒì„±ìì™€ propertyë¥¼ ê°–ëŠ” class ì„ ì–¸

> kotlinì€ ì£¼ ìƒì„±ì(primary constructor, class ì´ˆê¸°í™” í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê°„ëµí•œ ìƒì„±ì)ì™€ ë¶€ ìƒì„±ì(secondary constructor, class ë³¸ë¬¸ ì•ˆì—ì„œ ì •ì˜)ë¥¼ êµ¬ë¶„í•œë‹¤. ë˜í•œ ì´ˆê¸°í™” ë¸”ë¡(initializer block)ì„ í†µí•´ì„œ ì´ˆê¸°í™” ë¡œì§ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤

### 4.2.1 class ì´ˆê¸°í™”: primary constructorì™€ ì´ˆê¸°í™” ë¸”ë¡

```kotlin
class User(val nickname: String) // class ì´ë¦„ ë’¤ì— ()ë¡œ ë‘˜ëŸ¬ì‹¸ì¸ ì½”ë“œ => ìƒì„±ìì„
```

- ë³´í†µ classì˜ ì„ ì–¸ì€ **`{}`** ë‚´ë¶€ì— ë“¤ì–´ê°
- class ì´ë¦„ ë’¤ì— `()`ë¡œ ë‘˜ëŸ¬ì‹¸ì¸ ì½”ë“œ â‡’ **primary constructor**
  - primary constructor â‡’ ìƒì„±ì íŒŒë¼ë¯¸í„° ì§€ì •/ ìƒì„±ì íŒŒë¼ë¯¸í„°ì— ì˜í•´ ì´ˆê¸°í™”ë˜ëŠ” property ì •ì˜

```kotlin
class User constructor(_nickname: String) {
	val nickname: String
	init {
		nickname = _nickname
	}
}

// ì•„ë˜ì²˜ëŸ¼ë„ ê°€ëŠ¥
class User(_nickname: String) {
	val nickname = _nickname
}
```

- `constructor`â‡’ primaryë‚˜ secondary ì •ì˜ ì‹œì‘í•  ë•Œ ì‚¬ìš©
- `init` â‡’ ì´ˆê¸°í™” ë¸”ë¡ ì‹œì‘
  - ì´ˆê¸°í™” ë¸”ë¡ â‡’ class ê°ì²´ ë§Œë“¤ì–´ì§ˆ ë•Œ (instanceí™” ë  ë•Œ) ì‹¤í–‰ë˜ëŠ” ì´ˆê¸°í™” ì½”ë“œ ì‘ì„±
  - primary constructorì™€ í•¨ê»˜ ì‚¬ìš©ë¨
  - primary constructorëŠ” ì œí•œì , ë³„ë„ì˜ ì½”ë“œ í¬í•¨í•  ìˆ˜ ì—†ìŒ â‡’ ì´ˆê¸°í™” ë¸”ë¡ í•„ìš”
- property ì´ˆê¸°í™” í•˜ëŠ” ì´ˆê¸°í™” ë¸”ë¡ ì•ˆì—ì„œë§Œ primary constructor ì˜ íŒŒë¼ë¯¸í„° ì°¸ì¡° ê°€ëŠ¥
- `class User(val nickname: String)` ë„ ê°€ëŠ¥! valì€ ì´ íŒŒë¼ë¯¸í„°ì— ìƒì‘í•˜ëŠ” propertyê°€ ìƒì„±ëœë‹¤ëŠ” ì˜ë¯¸
- ìƒì„±ì íŒŒë¼ë¯¸í„°ì—ë„ default ê°’ ì •ì˜ í•  ìˆ˜ ìˆìŒ

```kotlin
class User(val nickname: String,
					 val is Subscribed: Boolean = true)
```

- classì˜ instance â‡’ `new` í‚¤ì›Œë“œ ì—†ì´ ìƒì„±ì ì§ì ‘ í˜¸ì¶œ
- classì— ê¸°ë°˜ class ìˆëŠ” ê²½ìš° â‡’ primaryì—ì„œ ê¸°ë°˜ classì˜ ìƒì„±ì í˜¸ì¶œí•´ì•¼í•¨
  ```kotlin
  open class User(val nickname: String) { ... }

  class TwitterUser(nickname: String) User(nickname) { ... }
  ```
  - class ì •ì˜ ì‹œ ë³„ë„ë¡œ ì •ì˜ âŒ â‡’ ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ ì•„ë¬´ ì¼ë„ í•˜ì§€ ì•ŠëŠ” ì¸ì ì—†ëŠ” default ìƒì„±ì ë§Œë“¤ì–´ì¤Œ
    - `open class Button` â‡’ Button ìƒì„±ì ì•„ë¬´ ì¸ìë„ ë°›ì§€ ì•ŠìŒ but, Button ìƒì†í•œ í•˜ìœ„ classsëŠ” ë°˜ë“œì‹œ Button class ìƒì„±ì í˜¸ì¶œ í•„ìš”
    ```kotlin
    class RadioButton: Button()
    ```
- ê¸°ë°˜ class ì´ë¦„ ë’¤ì— ê¼­ `()` ë¹ˆ ê´„í˜¸ ë“¤ì–´ê°€ì•¼í•¨(ìƒì„±ì íŒŒë¼ë¯¸í„° ìˆì„ ê²½ìš°ì—” ì•ˆì— ì¸ì ë“¤ì–´ê°)
- ì¸í„°í˜ì´ìŠ¤ëŠ” ìƒì„±ì ì—†ìŒ â‡’ ë’¤ì— ì•„ë¬´ ê´„í˜¸ë„ ì—†ìŒ
- classë¥¼ ì™¸ë¶€ì—ì„œ instanceí™” í•˜ì§€ ëª»í•˜ê²Œ ë§‰ìœ¼ë ¤ë©´ ëª¨ë“  ìƒì„±ìë¥¼ privateë¡œ ë§Œë“¤ê¸°

```kotlin
class Secretive private constructor() {} // ì´ classì˜ ì£¼ ìƒì„±ìëŠ” ë¹„ê³µê°œì„
// ì™¸ë¶€ì—ì„œëŠ” Secretiveë¥¼ intanceí™” í•  ìˆ˜ ì—†ë‹¤
```

### 4.2.2 secondary constructor: ìƒìœ„ classë¥¼ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì´ˆê¸°í™”

- ìƒì„±ì ì—¬ëŸ¬ê°œ í•„ìš”í•  ê²½ìš° â‡’ **default íŒŒë¼ë¯¸í„° ê°’**ì´ë‚˜ **ì´ë¦„ ë¶™ì¸ ì¸ì** ë¬¸ë²•ìœ¼ë¡œ í•´ê²° ê°€ëŠ¥
- ê·¸ë˜ë„ í•„ìš”í•  ê²½ìš° â¬‡ï¸

```kotlin
open class View { // primary ì—†ìŒ
	constructor(ctx: Context) { // secondary
		//ì½”ë“œ
	}
	constructor(ctx: Context, attr: AttributeSet) { // secondary
		//ì½”ë“œ
	}
}
```

```kotlin
// class í™•ì¥í•˜ë©´ì„œ ë˜‘ê°™ì´ ë¶€ ìƒì„±ì ì •ì˜ ê°€ëŠ¥
class MyButton : View {
	constructor(ctx: Context)
		:super(ctx) { // ìƒìœ„ classì˜ ìƒì„±ì í˜¸ì¶œ
			// ...
	}
	constructor(ctx: Context, attr: AttributeSet)
		:super(ctx, attr) {
			//...
		}
	}
```

- ìƒìœ„ class ìƒì„±ìì—ê²Œ ê°ì²´ ìƒì„± ìœ„ì„
- classì— primaryê°€ ì—†ìœ¼ë©´ secondary ëŠ” ë°˜ë“œì‹œ ìƒìœ„ class ì´ˆê¸°í™” or ë‹¤ë¥¸ ìƒì„±ìì—ê²Œ ìƒì„± ìœ„ì„í•´ì•¼í•¨

### 4.2.3 ì¸í„°í˜ì´ìŠ¤ì— ì„ ì–¸ëœ property êµ¬í˜„

- ì¸í„°í˜ì´ìŠ¤ì— ì¶”ìƒ property ì„ ì–¸ ê°€ëŠ¥
  ```kotlin
  interface User {
  	val nickname: String
  }
  ```
  - êµ¬í˜„ classê°€ property ê°’ì„ ì–»ì„ ìˆ˜ ìˆëŠ” ë°©ë²• ì œê³µí•´ì•¼í•¨
  - ì¸í„°í˜ì´ìŠ¤ì˜ property ì„ ì–¸ì—ëŠ” ë’·ë°›ì¹¨í•˜ëŠ” fieldë‚˜ getter ë“± ì •ë³´ ì—†ìŒ
    - ì¸í„°í˜ì´ìŠ¤ëŠ” ì•„ë¬´ ìƒíƒœë„ í¬í•¨ ì•ˆë¨ â‡’ ìƒíƒœ ì €ì¥í•˜ë ¤ë©´ í•˜ìœ„ classì—ì„œ ìƒíƒœ ì €ì¥ ìœ„í•œ property ë“± ë§Œë“¤ì–´ì•¼ í•¨
  ```kotlin
  class privateUser(override val nickname: String): User // primary ì— ìˆë˜ property, User ì¶”ìƒ property êµ¬í˜„ ì¤‘ override í‘œì‹œ í•„ìš”

  class SubscribingUser(val email: String) : User {
  	override val nickname: String
  		get() = email.substringBefore('@') // ì»¤ìŠ¤í…€ getterë¡œ nickname property ì„¤ì • => ë’·ë°›ì¹¨í•˜ëŠ” í•„ë“œì— ê°’ ì €ì¥ì•ˆí•¨. ë§¤ë²ˆ ë³„ëª… ê³„ì‚°í•´ì„œ ë°˜í™˜
  }

  class FacebookUser(val accountId: Int) : User {
  	 override val nickname = getFacebookName(accoutId) // property ì´ˆê¸°í™” ì‹ìœ¼ë¡œ nickname ê°’ ì´ˆê¸°í™”(ë’·ë°›ì¹¨í•˜ëŠ” fieldì— ê°’ ì €ì¥ í•´ë†“ê³  ë¶ˆëŸ¬ì˜´)
  }

  println(privateUser("test@kotlinlang.org").nickname) // test@kotlinlang.org
  println(subscribingUser("test@kotlinlang.org").nickname) // test
  ```
- ì¸í„°í˜ì´ìŠ¤ì— getter, setterê°€ ìˆëŠ” property ì„ ì–¸ ê°€ëŠ¥(ë’·ë°›ì¹¨í•˜ëŠ” field ì°¸ì¡° í•  ìˆ˜ ì—†ìŒâ‡’ìƒíƒœê°€ ì¶”ê°€í•˜ëŠ” ê²Œ ë¨)
  - í•˜ìœ„ classì—ì„œëŠ” ì¶”ìƒ property ë°˜ë“œì‹œ overrideí•´ì•¼ í•¨, getter setter ìˆìœ¼ë©´ ê·¸ëƒ¥ ìƒì†í•  ìˆ˜ ìˆìŒ
  ```kotlin
  interface User {
  	val email: String // ì¶”ìƒ property, ë°˜ë“œì‹œ í•˜ìœ„ì—ì„œ override í•„ìš”
  	val nickname: String // getterìˆëŠ” property, override ì•ˆí•˜ê³  ìƒì†í•  ìˆ˜ ìˆìŒ
  		get() = email.substringBefore('@')
  	}
  ```

### 4.2.4 getterì™€ setterì—ì„œ ë’·ë°›ì¹¨í•˜ëŠ” fieldì— ì ‘ê·¼

- ì–´ë–¤ ê°’ì„ ì €ì¥í•˜ë˜ ê°’ ë³€ê²½í•˜ê±°ë‚˜ ì½ì„ ë•Œë§ˆë‹¤ ì •í•´ì§„ ë¡œì§ ì‹¤í–‰í•˜ëŠ” property ë§Œë“¤ê¸° â‡’ ì ‘ê·¼ì ì•ˆì—ì„œ property ë’·ë°›ì¹¨í•˜ëŠ” field ì ‘ê·¼ í•´ì•¼ í•¨

```kotlin
class User(val name: String) {
	var address: String = "unspecified"
		set(value: String) {
			prinln("""
				Address was changed for $name:
				"$filed" -> "$value".""".trimIndent()) // ë’·ë°›ì¹¨í•˜ëŠ” í•„ë“œ ê°’ ì½ê¸°
			field = value // ë’·ë°›ì¹¨í•˜ëŠ” í•„ë“œ ê°’ ë³€ê²½
		}
}

val user = User("Alice")
user.address = "Elsenheimerstrasse 47, 80687 Muenchen"
Address was changed for Alice:
"unspecified" -> "Elsenheimerstrasse 47, 80687 Muenchen".
```
